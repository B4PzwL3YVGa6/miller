
================================================================
GRAMMAR REORG


---------------------------------------------------------------- simplest
mlr --from /dev/null put -v #
================================= TOP LEVEL BEGIN:
list (statement_list):
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

mlr --from /dev/null put -v #$m=2
================================= TOP LEVEL BEGIN:
list (statement_list):
    = (srec_assignment):
        m (field_name).
        2 (strnum_literal).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

mlr --from /dev/null put -v #$m=2;$m=3
================================= TOP LEVEL BEGIN:
list (statement_list):
    = (srec_assignment):
        m (field_name).
        2 (strnum_literal).
    = (srec_assignment):
        m (field_name).
        3 (strnum_literal).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

mlr --from /dev/null put -v #$m=2;$m=3;$m=4
================================= TOP LEVEL BEGIN:
list (statement_list):
    = (srec_assignment):
        m (field_name).
        2 (strnum_literal).
    = (srec_assignment):
        m (field_name).
        3 (strnum_literal).
    = (srec_assignment):
        m (field_name).
        4 (strnum_literal).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

mlr --from /dev/null put -v #$m=2;;$m=3;$m=4
================================= TOP LEVEL BEGIN:
list (statement_list):
    = (srec_assignment):
        m (field_name).
        2 (strnum_literal).
    = (srec_assignment):
        m (field_name).
        3 (strnum_literal).
    = (srec_assignment):
        m (field_name).
        4 (strnum_literal).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- begin/main/end
mlr --from /dev/null put -v #begin{$b=1};$m=2;end{$e=3}
================================= TOP LEVEL BEGIN:
list (statement_list):
    begin (begin):
        list (statement_list):
            = (srec_assignment):
                b (field_name).
                1 (strnum_literal).
    = (srec_assignment):
        m (field_name).
        2 (strnum_literal).
    end (end):
        list (statement_list):
            = (srec_assignment):
                e (field_name).
                3 (strnum_literal).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:cond
mlr --from /dev/null put -v #true{$m=2}
================================= TOP LEVEL BEGIN:
list (statement_list):
    cond (conditional_block):
        true (boolean_literal).
        list (statement_list):
            = (srec_assignment):
                m (field_name).
                2 (strnum_literal).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:empty-for
mlr --from /dev/null put -v #for(k,v in $*) { }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:single-statement-for
mlr --from /dev/null put -v #for(k,v in $*) { $m=1}
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:double-statement-for
mlr --from /dev/null put -v #for(k,v in $*) { $m=1;$m=2 }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:for w/ break/continue
mlr --from /dev/null put -v #for(k,v in $*) { $m=1;break;$m=2 }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

mlr --from /dev/null put -v #for(k,v in $*) { $m=1;break;continue;$m=2 }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

mlr --from /dev/null put -v #for(k,v in $*) { $m=1;break;continue;;$m=2 }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:for:cond
mlr --from /dev/null put -v #for(k,v in $*) { true{$m=3} }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:cond:for
mlr --from /dev/null put -v #true{ for(k,v in $*) { $m=1 } }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    cond (conditional_block):
        true (boolean_literal).
        list (statement_list):
            k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

mlr --from /dev/null put -v #true{ for(k,v in $*) { $m=1;break;continue;;$m=2 } }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    cond (conditional_block):
        true (boolean_literal).
        list (statement_list):
            k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):


---------------------------------------------------------------- main:cond:for:cond
mlr --from /dev/null put -v #true{ for(k,v in $*) { true{$m=3} } }
-- FOR SREC:
k (non_sigil_name).
v (non_sigil_name).
================================= TOP LEVEL BEGIN:
list (statement_list):
    cond (conditional_block):
        true (boolean_literal).
        list (statement_list):
            k (non_sigil_name).
================================= TOP LEVEL END.
AST BEGIN STATEMENTS (0):
AST MAIN STATEMENTS (0):
AST END STATEMENTS (0):

